<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <title></title>
  <style>
  </style>
</head>

<body>
  <script>
    // 第四版
    Function.prototype.bind2 = function (context) {

      var self = this;
      var args = Array.prototype.slice.call(arguments, 1);

      var fNOP = function () {};

      var fBound = function () {
        var bindArgs = Array.prototype.slice.call(arguments);
        console.log(this.__proto__)
        console.log(this.__proto__.__proto__ === fNOP.prototype)
        console.log(this instanceof fNOP)
        return self.apply(this instanceof fNOP ? this : context, args.concat(bindArgs));
      }

      fNOP.prototype = this.prototype;
      fBound.prototype = new fNOP();
      return fBound;
    }

    function bar() {
      this.name = 'jt '
    }
    let bindBar = bar.bind2()
    let obj = new bindBar()
    console.log(obj)
  </script>
</body>

</html>