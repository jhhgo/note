<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <style></style>
</head>

<body>
  <p id="p">Select me: <i>italic</i> and <b>bold</b></p>

  Cloned: <span id="cloned"></span>
  <br>
  As text: <span id="astext"></span>
  <script>
    document.onselectionchange = function () {
      let selection = document.getSelection();

      cloned.innerHTML = astext.innerHTML = "";

      // 从范围复制 DOM 节点（这里我们支持多选）
      for (let i = 0; i < selection.rangeCount; i++) {
        cloned.append(selection.getRangeAt(i).cloneContents());
      }

      // 获取为文本形式
      astext.innerHTML += selection;
    };
  </script>
</body>

</html>