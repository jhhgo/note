<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <style>
  </style>
</head>


<body>
  <div style="height: 100vh;width: 100vw;"></div>
  <script>
    class EventEmitter {
      constructor() {
        this.list = {}
      }
      on(name, fn) {
        if (!this.list[name]) {
          this.list[name] = []
        }
        this.list[name].push(fn)
      }
      remove(name, fn) {
        let fns = this.list[name]
        fns.forEach((item, index) => {
          if (fn === item) fns.splice(index, 1)
        })
      }
      emit(name, ...args) {
        let fns = this.list[name]
        if (!fns || fns.length === 0) return
        fns.forEach(fn => {
          fn.apply(this, args)
        })
      }
    }

    function foo() {
      console.log('foo');
    }
    function bar() {
      console.log('bar');
    }

    let bus = new EventEmitter()
    bus.on('click', foo)
    bus.on('click', bar)
    bus.emit('click')

    bus.remove('click', foo)
    bus.emit('click')

  </script>
</body>

</html>