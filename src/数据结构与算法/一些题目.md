2. react hook å®ç°å€’è®¡æ—¶

3. get({a:{b:[1,2,3]}}, â€˜a.b[0]â€™) => 1

4. setTimeout ä¸å‡†æ—¶ï¼Œæ€ä¹ˆå®ç°ä¸€ä¸ªå‰ç«¯ 1s å€’è®¡æ—¶è®¡æ•°ï¼Œç›¸å¯¹å‡†æ—¶

5. é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡

6. æ±‚æ•°ç»„ä¸­é‡å¤æœ€å¤šçš„æ•°

8. è§£å†³ 0.1+0.2 ä¸å‡†ç¡®çš„é—®é¢˜
9. [3,1,6,4,5,2]
   å¯¹äºä»»æ„å­åºåˆ—å¯ä»¥è®¡ç®—ä¸€ä¸ª X å€¼ï¼ŒX=sum(subArray) _ min(subArray)
   æ±‚æœ€å¤§ X
   X = (6+4+5) _ 4 = 60
   https://leetcode-cn.com/circle/discuss/pv7bY1/view/pv0sUU/

## js ç¼–ç¨‹é¢˜

1. æ·±æ‹·è´

2. bindã€callã€apply å®ç°

3. instanceof å®ç°

4. ajax å°è£…

5. setTimeout æ¨¡æ‹Ÿ setInterval

6. å®ç° fetch

7. reduce å®ç° map

```js
Array.prototype._map = function (fn, fnThis) {
  // è¿”å›çš„æ•°ç»„
  let res = []
  fnThis = fnThis || null
  this.reduce((prev, cur, index, arr) => {
    res.push(fn.call(fnThis, cur, index, arr))
  }, null)
  return res
}
```

8. Promise.all å®ç°

```js
Promise.prototype.all = function (promises) {
  let result = []
  let count = 0
  return new Promise((resolve, reject) => {
    promises.forEach((promise) => {
      Promise.resolve(promise).then(
        (value) => {
          count++
          result[i] = value
          if (count === promises.length) return resolve(result)
        },
        (error) => {
          return reject(error)
        }
      )
    })
  })
}
```

9. sleep

```js
function sleep(wait) {
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve()
    }, wait)
  })
}

;(async function () {
  for (let i = 1; i <= 5; i++) {
    console.log(i)
    await sleep(1000)
  }
})()
// æ¯éš”1sï¼Œè¾“å‡º1~5
```

10. [æ¯”è¾ƒç‰ˆæœ¬å·](https://leetcode-cn.com/problems/compare-version-numbers/submissions/)

```js
function compareVersion(version1, version2) {
  version1 = version1.split('.')
  version2 = version2.split('.')
  let max = Math.max(version1.length, version2.length)
  for (let i = 0; i < max; i++) {
    let code1 = version1[i] === undefined ? 0 : parseInt(version1[i])
    let code2 = version2[i] === undefined ? 0 : parseInt(version2[i])
    if (code1 > code2) return 1
    if (code1 < code2) return -1
  }
  return 0
}
```

11. å®ç°`fill(n, v) => [v,...,v]è¾“å‡ºnä¸ªvï¼Œvå¯ä»¥æ˜¯ä»»ä½•ç±»å‹`

```js
// ä¸èƒ½ç”¨forã€mapã€whileã€array.fill
// ç”¨é€’å½’
function fill(n, v, res = []) {
  if (res.length === n) return res
  res.push(v)
  return fill(n, b)
}
```

12. è§£æ query

```js
// è§£æ urlï¼Œå®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå…¶æ¥å—ä¸€ä¸ªå‚æ•° urlï¼Œè¿”å›è§£æ query string åçš„å¯¹è±¡ã€‚
// è¾“å…¥ï¼šhttps://toutiao.com/home?a=q&b=w&c=e&a=r
// è¾“å‡ºï¼š { a: [â€˜qâ€™, â€˜râ€™], b: â€˜wâ€˜, c: â€˜eâ€™ }
function getQuery(url) {
  let querys = url.split('?')[1].split('&')
  let res = {}
  querys.forEach((query) => {
    query = query.split('=')
    if (!res[query[0]]) {
      res[query[0]] = [query[1]]
    } else {
      res[query[0]].push(query[1])
    }
  })
  for (let val in res) {
    if (res[val].length === 1) res[val] = res[val].join('')
  }
  return res
}
```

13. ä»ä¸¤ä¸ªæ•°ç»„ä¸­æ‰¾å‡ºå…±æœ‰çš„å…ƒç´ 

```js
function find(arr1, arr2) {
  let map = new Map()
  let res = []
  for (let i = 0; i < arr1.length; i++) {
    if (!map.has(arr1[i])) map.set(arr1[i], 1)
  }
  for (let i = 0; i < arr2.length; i++) {
    if (map.has(arr2[i])) res.push(arr2[i])
  }
  return res
}
```

14. æ±‚æœ€å¤§å…¬çº¦æ•°

```js
// æ›´ç›¸å‡æŸæ³•
function gcd(a, b) {
  if (a === b) return b
  if (a < b) {
    a -= b
  } else {
    b -= a
  }
  gcd(a, b)
}

// è¾—è½¬ç›¸é™¤æ³•
function gcd(a, b) {
  if (a % b === 0) return b
  return gcd(b, a % b)
}
```

15. å¤§æ•°ç›¸åŠ 

16. ä¸ç”¨(+ - \* /)å®ç°åŠ æ³•

```js
function add(a, b) {
  if (a === 0) return b
  if (b === 0) return a
  return add(a ^ b, (a & b) << 1)
}
```

17. æ‰‹å†™ JSON.stringify

18. æ‰‹å†™ trim

19. èºæ—‹çŸ©é˜µ

```js
var spiralOrder = function(matrix) {
    const row = matrix.length, col = matrix[0].length, size = row * col, res = []

    let t = 0, r = col - 1, b = row - 1, l = 0 // ä¸Šã€å³ã€ä¸‹ã€å·¦è¾¹ç•Œ

    while (res.length !== size) {
        // å·¦å¾€å³
        for (let i=l;i<=r;i++) res.push(matrix[t][i])
        // ä¸Šè¡Œå¡«å®Œï¼Œä¸Šè¾¹ç•Œä¸‹ç§»
        t++

        // ä¸Šå¾€ä¸‹
        for (let i=t;i<=b;i++) res.push(matrix[i][r])
        // å³åˆ—å¡«å®Œï¼Œå³è¾¹ç•Œå·¦ç§»
        r--

        if (res.length === size) break

        // å³å¾€å·¦
        for (let i=r;i>=l;i--) res.push(matrix[b][i])
        // ä¸‹è¡Œå¡«å®Œï¼Œä¸‹è¾¹ç•Œä¸Šç§»
        b--

        // ä¸‹å¾€ä¸Š
        for (let i=b;i>=t;i--) res.push(matrix[i][l])
        l++
    }
    return res
};
```

## DP

1. [çˆ¬æ¥¼æ¢¯](https://leetcode-cn.com/problems/climbing-stairs/)

```js
çŠ¶æ€å®šä¹‰ï¼šdp[n]ä»£è¡¨çˆ¬né˜¶æ¥¼æ¢¯çš„æ–¹æ¡ˆæ•°
åˆå§‹åŒ–ï¼šdp[0] = 1 dp[1] = 1
çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šæ¯æ¬¡åªèƒ½ä¸Šä¸€é˜¶æˆ–è€…äºŒé˜¶ï¼Œæ‰€ä»¥dp[i] = dp[i-1] + dp[i-2]
var climbStairs = function(n) {
    let dp = new Array(n + 1)
    dp[0] = 1
    dp[1] = 1
    for (let i=2;i<dp.length;i++) {
        dp[i] = dp[i - 1] + dp[i - 2]
    }
    return dp[n]
};
```

2. [æœ€é•¿å›æ–‡å­ä¸²](https://leetcode-cn.com/problems/longest-palindromic-substring/)

```js
çŠ¶æ€å®šä¹‰ï¼šdp[i][j]è¡¨ç¤ºä»s[i...j]æ˜¯å¦æ˜¯å›æ–‡ä¸²
åˆå§‹åŒ–ï¼šå¯¹è§’çº¿ä¸Šçš„éƒ½æ˜¯å›æ–‡
çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šdp[i][j]åœ¨å¤´å°¾å­—ç¬¦ç›¸ç­‰çš„æƒ…å†µä¸‹(s[i] === s[j])å–å†³äºå»æ‰å¤´å°¾å­—ç¬¦çš„å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²ã€‚å³dp[i][j] = s[i] === s[j] && dp[i+1][j-1]

var longestPalindrome = function (s) {
      let len = s.length
      if (len < 2) return s
      let maxLen = 1
      let begin = 0
      let dp = new Array(len).fill(0).map(item => new Array(len))
      for (let i = 0; i < len; i++) {
        // åˆå§‹åŒ–
        dp[i][i] = true
      }
      // ç”±äºdp[i][j]å–å†³äºå·¦ä¸‹è§’çš„å€¼ï¼Œæ‰€ä»¥ä»åˆ—å¼€å§‹å¡«æ•°
      for (let j = 1; j < len; j++) {
        for (let i = 0; i < j; i++) {
          // å¤´å°¾å­—ç¬¦ä¸ç­‰ï¼Œä¸æ˜¯å›æ–‡ä¸²
          if (s[i] !== s[j]) {
            dp[i][j] = false
          } else {
            if (j - i < 3) {
              // å¤´å°¾å­—ç¬¦ç›¸ç­‰ï¼Œä¸”ä¸­é—´åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œæ˜¯å›æ–‡
              dp[i][j] = true
            } else {
              dp[i][j] = dp[i + 1][j - 1]
            }
          }
          if (dp[i][j] && j - i + 1 > maxLen) {
            maxLen = j - i + 1
            begin = i
          }
        }
      }
      return s.substr(begin, maxLen)
    };
```

3. [æœ€å¤§å­åºå’Œ](https://leetcode-cn.com/problems/maximum-subarray/solution/)

```js
çŠ¶æ€å®šä¹‰ï¼šdp[i]è¡¨ç¤ºæ•°ç»„å‰iä¸ªå…ƒç´ ç»„æˆçš„æœ€å¤§å’Œ
åˆå§‹åŒ–ï¼šdp[0] = nums[0]ï¼Œå‰1ä¸ªå…ƒç´ çš„æœ€å¤§å’Œå°±æ˜¯è‡ªèº«
çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šdp[i] = max(dp[i - 1] + nums[i], nums[i])
var maxSubArray = function(nums) {
    let dp = new Array(nums.length)
    dp[0] = nums[0]
    for (let i=1;i<nums.length;i++) {
        dp[i] = Math.max(dp[i - 1] + nums[i], nums[i])
    }
    return Math.max.apply(null, dp)
};
```

4. [ä¸åŒè·¯å¾„](https://leetcode-cn.com/problems/unique-paths/)

```js
dp[i][j]è¡¨ç¤ºåˆ°è¾¾i,jçš„è·¯å¾„å’Œ
åˆå§‹åŒ–ï¼šç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„å€¼ä¸º1(åˆ°è¾¾ä¸Šè¾¹ç•Œã€ä¸‹è¾¹ç•Œæ‰€ä»¥å„è‡ªçš„è·¯å¾„åªæœ‰1ç§)
çŠ¶æ€è½¬ç§»ï¼šdp[i][j] = dp[i-1][j] + dp[i][j-1]
var uniquePaths = function (m, n) {
      let dp = new Array(m).fill(0).map(item => new Array(n).fill(0))
      for (let i = 0; i < n; i++) {
        dp[0][i] = 1
      }
      for (let i = 0; i < m; i++) {
        dp[i][0] = 1
      }
      for (let i = 1; i < m; i++) {
        for (let j = 1; j < n; j++) {
          dp[i][j] = dp[i - 1][j] + dp[i][j - 1]
        }
      }
      return dp[m - 1][n - 1]
    };
```

5. [æ‰“å®¶åŠ«èˆ](https://leetcode-cn.com/problems/house-robber/solution/)

```js
çŠ¶æ€å®šä¹‰ï¼šdp[i]ä»£è¡¨å·å‰iå®¶å¯å¾—åˆ°çš„æœ€å¤§æ”¶ç›Š
åˆå§‹åŒ–ï¼šdp[0] = 0å·ç¬¬0å®¶æ²¡æœ‰æ”¶ç›Šï¼Œdp[1] = nums[0]å·ç¬¬ä¸€å®¶çš„æ‰‹æœº=è¿™å®¶æœ‰çš„é’±
çŠ¶æ€è½¬ç§»ï¼šdp[i] = max(dp[i-1], dp[i-2] + nums[i-1])ã€‚å¯¹äºç¬¬iå®¶è€Œè¨€ï¼Œåªæœ‰ä¸¤ç§æƒ…å†µï¼Œå·æˆ–ä¸å·ç¬¬iå®¶ã€‚å·çš„è¯æ”¶ç›Šä¸ºdp[i-2]+nums[i-1]ï¼Œä¸å·çš„è¯æ”¶ç›Šä¸ºdp[i-1]
var rob = function(nums) {
    let len = nums.length
    if (len === 0) return 0
    let dp = new Array(len + 1)
    dp[0] = 0
    dp[1] = nums[0]
    for (let i=2;i<dp.length;i++) {
        dp[i] = Math.max(nums[i - 1] + dp[i - 2], dp[i - 1])
    }
    return dp[len]
};
```

6. [æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode-cn.com/problems/longest-increasing-subsequence/)

```js
// dp[i]è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦
// dp[i]åˆå§‹å€¼ä¸º1ï¼Œæœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦æœ€å°‘ä¸º1
// dp[i] = max(dp[j] + 1, dp[i])
var lengthOfLIS = function(nums) {
    let dp = Array.from({length: nums.length}).fill(1)
    for (let i=1;i<dp.length;i++) {
        for (let j=0;j<i;j++) {
            if (nums[j] < nums[i]) {
                dp[i] = Math.max(dp[j] + 1, dp[i])
            }
        }
    }
    return Math.max.apply(null, dp)
};
```

## æ•°æ®ç»“æ„

### dfs

1. å²›å±¿æ•°é‡

2. [å…¬å…±ç¥–å…ˆ](https://leetcode-cn.com/problems/er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof/solution/er-cha-shu-de-zui-jin-gong-gong-zu-xian-6fdt7/)

```js
var lowestCommonAncestor = function (root, p, q) {
  // å¦‚æœæ ‘ä¸ºç©ºï¼Œç›´æ¥è¿”å›null
  if (!root) return null
  // å¦‚æœ på’Œqä¸­æœ‰ç­‰äº rootçš„ï¼Œé‚£ä¹ˆå®ƒä»¬çš„æœ€è¿‘å…¬å…±ç¥–å…ˆå³ä¸ºrootï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰
  if (root === p || root === q) return root
  // é€’å½’éå†å·¦å­æ ‘ï¼Œåªè¦åœ¨å·¦å­æ ‘ä¸­æ‰¾åˆ°äº†pæˆ–qï¼Œåˆ™å…ˆæ‰¾åˆ°è°å°±è¿”å›è°
  let left = lowestCommonAncestor(root.left, p, q)
  // é€’å½’éå†å³å­æ ‘ï¼Œåªè¦åœ¨å·¦å­æ ‘ä¸­æ‰¾åˆ°äº†pæˆ–qï¼Œåˆ™å…ˆæ‰¾åˆ°è°å°±è¿”å›è°
  let right = lowestCommonAncestor(root.right, p, q)

  // å¦‚æœåœ¨å·¦å­æ ‘ä¸­ på’Œ qéƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™ på’Œ qä¸€å®šéƒ½åœ¨å³å­æ ‘ä¸­ï¼Œå³å­æ ‘ä¸­å…ˆéå†åˆ°çš„é‚£ä¸ªå°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰
  if (left === null) {
    return right
  } else if (right === null) {
    // å¦åˆ™ï¼Œå¦‚æœ leftä¸ä¸ºç©ºï¼Œåœ¨å·¦å­æ ‘ä¸­æœ‰æ‰¾åˆ°èŠ‚ç‚¹ï¼ˆpæˆ–qï¼‰ï¼Œè¿™æ—¶å€™è¦å†åˆ¤æ–­ä¸€ä¸‹å³å­æ ‘ä¸­çš„æƒ…å†µï¼Œå¦‚æœåœ¨å³å­æ ‘ä¸­ï¼Œpå’Œqéƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™ på’Œqä¸€å®šéƒ½åœ¨å·¦å­æ ‘ä¸­ï¼Œå·¦å­æ ‘ä¸­å…ˆéå†åˆ°çš„é‚£ä¸ªå°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰
    return left
  } else {
    //å¦åˆ™ï¼Œå½“ leftå’Œ rightå‡ä¸ä¸ºç©ºæ—¶ï¼Œè¯´æ˜ pã€qèŠ‚ç‚¹åˆ†åˆ«åœ¨ rootå¼‚ä¾§, æœ€è¿‘å…¬å…±ç¥–å…ˆå³ä¸º root
    return root
  }
}
```

4. [è·¯å¾„æ€»å’Œ](https://leetcode-cn.com/problems/path-sum/)

```js
var hasPathSum = function (root, targetSum) {
  // ä¸å­˜åœ¨è¿”å›false
  if (!root) return false
  // æ²¡æœ‰å·¦å³å­æ ‘ï¼Œåˆ¤æ–­root.val === targetSum
  if (!root.left && !root.right) return root.val === targetSum

  // é€’å½’å·¦å³å­æ ‘ï¼Œçœ‹æ˜¯å¦å’Œä¸ºtargetSum - root.val
  return (
    hasPathSum(root.left, targetSum - root.val) ||
    hasPathSum(root.right, targetSum - root.val)
  )
}
```

5. [æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ](https://leetcode-cn.com/problems/sum-root-to-leaf-numbers/)

```js
var sumNumbers = function (root, prevSum = 0) {
  if (!root) return 0
  let sum = prevSum * 10 + root.val
  if (!root.right && !root.left) {
    return sum
  } else {
    return sumNumbers(root.left, sum) + sumNumbers(root.right, sum)
  }
}
```

6. [äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode-cn.com/problems/binary-tree-level-order-traversal/)

```js
var levelOrder = function (root) {
  if (!root) return []
  let res = [[root.val]]
  let queue = [root]

  while (queue.length > 0) {
    let tmp = []
    let sub_res = []
    for (let i = 0; i < queue.length; i++) {
      if (queue[i].left) tmp.push(queue[i].left)
      if (queue[i].right) tmp.push(queue[i].right)
    }
    sub_res = tmp.map((item) => item.val)
    sub_res.length > 0 && res.push(sub_res)
    queue = tmp
  }
  return res
}
```

7. [äºŒå‰æœç´¢æ ‘ä¸­ç¬¬ K å°çš„å…ƒç´ ](https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/)

```js
// äºŒå‰æœç´¢æ•°ç›®ï¼Œå·¦å„¿å­ä¸€å®šå°äºæ ¹èŠ‚ç‚¹ï¼Œå³å„¿å­ä¸€å®šå¤§äºæ ¹èŠ‚ç‚¹ã€‚
// æ‰€ä»¥é€šè¿‡ä¸­åºéå†(å·¦ã€ä¸­ã€å³)ï¼Œè¾“å‡ºç¬¬kä¸ªå³å¯
let kthSmallest = function (root, k) {
  let res = null
  let dfs = (root) => {
    if (root && k > 0) {
      dfs(root.left)
      if (--k === 0) {
        res = root.val
        return
      }
      dfs(root.right)
    }
  }
  dfs(root)
  return res
}
```

8. [å¤åŸ IP åœ°å€](https://leetcode-cn.com/problems/restore-ip-addresses/)\

```js
var restoreIpAddresses = function (s) {
  if (s === '') return []
  let res = []
  let dfs = (s, stack = [], index = 0) => {
    if (stack.length === 4 || index === s.length) {
      if (stack.length === 4 && index === s.length) {
        res.push(stack.join('.'))
      }
      return
    }
    // IPæœ€å¤šä¸‰ä½ï¼Œæ‰€ä»¥<4
    for (let i = 1; i < 4; i++) {
      let ip = s.substr(index, i)
      if (parseInt(ip) < 256 && (ip === '0' || ip[0] !== '0')) {
        stack.push(ip)
        dfs(s, stack, index + i)
        stack.pop()
      }
    }
  }
  dfs(s)
  return res
}
```

9. [å…¨æ’åˆ—](https://leetcode-cn.com/problems/permutations/)

```js
var permute = function (nums) {
  let res = []
  let dfs = (nums, sub_res = []) => {
    // é€’å½’æˆªæ­¢æ¡ä»¶
    if (sub_res.length === nums.length) {
      res.push([...sub_res])
    }
    for (let i = 0; i < nums.length; i++) {
      let num = nums[i]
      if (num !== undefined) {
        sub_res.push(num)
        nums[i] = undefined
        dfs(nums, sub_res)
        // å›æº¯
        sub_res.pop()
        nums[i] = num
      }
    }
  }
  dfs(nums)
  return res
}
```

10. [å²›å±¿çš„æœ€å¤§é¢ç§¯](https://leetcode-cn.com/problems/max-area-of-island/)

```js
var maxAreaOfIsland = function (grid) {
  let dfs = (grid, i, j) => {
    if (
      i < 0 ||
      i >= grid.length ||
      j < 0 ||
      j >= grid[i].length ||
      grid[i][j] === 0
    )
      return
    grid[i][j] = 0
    obj.area++
    dfs(grid, i - 1, j)
    dfs(grid, i + 1, j)
    dfs(grid, i, j - 1)
    dfs(grid, i, j + 1)
  }
  let obj = {
    area: 0,
  }
  let maxArea = 0
  for (let i = 0; i < grid.length; i++) {
    for (let j = 0; j < grid[0].length; j++) {
      if (grid[i][j] === 1) {
        obj.area = 0
        dfs(grid, i, j)
        maxArea = Math.max(maxArea, obj.area)
      }
    }
  }
  return maxArea
}
```

11. [ç¿»è½¬äºŒå‰æ ‘](https://leetcode-cn.com/problems/invert-binary-tree/)

```js
var invertTree = function (root) {
  if (!root) return null
  let left = invertTree(root.left)
  let right = invertTree(root.right)
  root.left = right
  root.right = left
  return root
}
```

12. [è·¯å¾„æ€»å’Œ II](https://leetcode-cn.com/problems/path-sum-ii/)

```js
var pathSum = function (root, targetSum) {
  let res = []
  let dfs = (root, path = [], sum = 0) => {
    if (!root) return
    // æ¯éå†ä¸€ä¸ªèŠ‚ç‚¹å°±åŠ å…¥åˆ°è·¯å¾„ä¸­
    path.push(root.val)
    // ç®—å‡ºç›®å‰çš„å’Œ
    sum += root.val
    // æ²¡æœ‰leftã€rightã€‚ç›¸å½“äºå¶å­ç»“ç‚¹ï¼Œéå†å®Œä¸€æ¡è·¯å¾„äº†ã€‚åˆ¤æ–­è·¯å¾„å’Œ===targetSum? æŠŠç»“æœpushåˆ°resä¸­
    if (!root.left && !root.right) {
      if (sum === targetSum) res.push([...path])
    } else {
      // éå†å·¦
      dfs(root.left, path, sum)
      // éå†å³
      dfs(root.right, path, sum)
    }
    // å›æº¯
    path.pop()
  }
  dfs(root)
  return res
}
```

13. [äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode-cn.com/problems/binary-tree-inorder-traversal/)

```js
var inorderTraversal = function (root) {
  let res = []
  let dfs = (root) => {
    if (!root) return
    dfs(root.left)
    res.push(root.val)
    dfs(root.right)
  }
  dfs(root)
  return res
}
```

14. [N å‰æ ‘çš„å±‚åºéå†](https://leetcode-cn.com/problems/n-ary-tree-level-order-traversal/)

```js
var levelOrder = function (root) {
  if (!root) return []
  let res = [[root.val]]
  let queue = [root]
  while (queue.length > 0) {
    let tmp = []
    let sub_res = []
    for (let i = 0; i < queue.length; i++) {
      if (queue[i].children) tmp.push(...queue[i].children)
    }
    sub_res = tmp.map((item) => item.val)
    sub_res.length > 0 && res.push(sub_res)
    queue = tmp
  }
  return res
}
```

15. [äºŒå‰æ ‘çš„å³è§†å›¾](https://leetcode-cn.com/problems/binary-tree-right-side-view/)

```js
var rightSideView = function(root) {
    // æ·±åº¦ä¼˜å…ˆéå†ï¼Œå…ˆéå†å³èŠ‚ç‚¹ã€‚
    // å¯¹äºæ¯å±‚æ¥è¯´ï¼Œè¯¥å±‚éå†åˆ°çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹ã€‚
    let dfs = (root, step, res) => {
        if (!root) return
        if (res.length === step) res.push(root.val)
        dfs(root.right, step + 1, res)
        dfs(root.left, step + 1, res)
    }
    if(!root) return []
    let res = []
    dfs(root, 0, res)
    return res
};
```

16. [é‡å»ºäºŒå‰æ ‘](https://leetcode-cn.com/problems/zhong-jian-er-cha-shu-lcof/submissions/)

```js
var buildTree = function(preorder, inorder) {
    // å‰åºéå†çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ ¹èŠ‚ç‚¹
    // æ ¹èŠ‚ç‚¹åœ¨ä¸­åºéå†ä¸­çš„ä½ç½®ï¼Œå·¦è¾¹æ˜¯å·¦å­æ ‘ï¼Œå³è¾¹æ˜¯å³å­æ ‘ã€‚
    // ç„¶åé€’å½’å»ºç«‹å·¦å­æ ‘ã€å³å­æ ‘
    if (!preorder.length) return null
    let root = new TreeNode(preorder[0])
    let index = inorder.indexOf(preorder[0])
    
    root.left = buildTree(preorder.slice(1, index + 1), inorder.slice(0, index))
    root.right = buildTree(preorder.slice(index + 1), inorder.slice(index + 1))
    return root
};
```

17. [äºŒå‰æ ‘çš„é•œåƒ](https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/)

```js
// åˆå§‹åŒ–èŠ‚ç‚¹ tmptmp ï¼Œç”¨äºæš‚å­˜ rootroot çš„å·¦å­èŠ‚ç‚¹ï¼›
// å¼€å¯é€’å½’ å³å­èŠ‚ç‚¹ mirrorTree(root.right)mirrorTree(root.right) ï¼Œå¹¶å°†è¿”å›å€¼ä½œä¸º rootroot çš„ å·¦å­èŠ‚ç‚¹ ã€‚
// å¼€å¯é€’å½’ å·¦å­èŠ‚ç‚¹ mirrorTree(tmp)mirrorTree(tmp) ï¼Œå¹¶å°†è¿”å›å€¼ä½œä¸º rootroot çš„ å³å­èŠ‚ç‚¹ ã€‚
var mirrorTree = function(root) {
    if (!root) return null
    let tmp = root.left
    root.left = mirrorTree(root.right)
    root.right = mirrorTree(tmp)
    return root
};
```


### é“¾è¡¨

1. [LRU ç¼“å­˜](https://leetcode-cn.com/problems/lru-cache/submissions/)
2. [é“¾è¡¨ä¸­å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹](https://leetcode-cn.com/problems/lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof/)
3. [åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list/)
4. [ç¯å½¢é“¾è¡¨](https://leetcode-cn.com/problems/linked-list-cycle/)
5. [åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨](https://leetcode-cn.com/problems/merge-two-sorted-lists/)

```js
var hasCycle = function (head) {
  let map = new Map()
  while (head) {
    if (map.has(head)) return true
    map.set(head, true)
  }
  return false
}
```

5. [ç›¸äº¤é“¾è¡¨](https://leetcode-cn.com/problems/intersection-of-two-linked-lists/)

### æ ˆé˜Ÿåˆ—

1. [æœ‰æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/valid-parentheses/)

```js
// ç”¨æ ˆæ¥å­˜å‚¨éå†åˆ°çš„å·¦å­—ç¬¦ã€‚
// éå†è¿‡ç¨‹ï¼šå¦‚æœå½“å‰çš„å­—ç¬¦æ˜¯ä¸€ä¸ªå³å­—ç¬¦ï¼Œåˆ™éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰å¯¹åº”çš„å·¦å­—ç¬¦ã€‚å¦‚æœæ­¤æ—¶æ ˆçš„é•¿åº¦ä¸º0ï¼ˆä»£è¡¨è¯¥å³å­—ç¬¦æ˜¯ç¬¬ä¸€ä¸ªï¼‰æˆ–è€…
// æ ˆé¡¶å­—ç¬¦æ— æ³•å¯¹åº”ã€‚åˆ™è¿”å›falseã€‚å¦‚æœåŒ¹é…ä¸Šï¼Œæ ˆé¡¶å…ƒç´ å‡ºæ ˆã€‚
// å¦‚æœæ˜¯ä¸€ä¸ªå·¦å­—ç¬¦ï¼Œè¿›æ ˆã€‚
var isValid = function(s) {
    const len = s.length
    if (len % 2 === 1) return false
    let stack = []
    const paris = new Map([
        [')', '('],
        [']', '['],
        ['}', '{']
    ])
    for (let i=0;i<len;i++) {
        if(paris.has(s[i])) {
            if (stack.length === 0 || stack[stack.length - 1] !== paris.get(s[i])) {
                return false
            }
            stack.pop()
        } else {
            stack.push(s[i])
        }
    }
    return stack.length === 0
};
```

2. å››åˆ™è¿ç®—

3. [ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—](https://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof/solution/)

```js
// æœ‰ä¸¤ä¸ªæ ˆï¼Œå…¥é˜Ÿæ ˆã€å‡ºé˜Ÿæ ˆã€‚
// å…¥æ ˆçš„æ—¶å€™ï¼Œç›´æ¥å‘å…¥é˜Ÿæ ˆpushå³å¯ã€‚
// å‡ºæ ˆçš„æ—¶å€™ï¼Œå…ˆåˆ¤æ–­å‡ºé˜Ÿæ ˆæ˜¯å¦æœ‰å…ƒç´ ã€‚æ²¡æœ‰çš„è¯å…ˆæŠŠæ‰€æœ‰å‡ºé˜Ÿæ ˆçš„å…ƒç´ pushè¿›æ¥ã€‚
var CQueue = function() {
    // å…¥é˜Ÿæ ˆ
    this.stack_in = []
    // å‡ºé˜Ÿæ ˆ
    this.stack_out = []
};

/** 
 * @param {number} value
 * @return {void}
 */
CQueue.prototype.appendTail = function(value) {
    this.stack_in.push(value)
};

/**
 * @return {number}
 */
CQueue.prototype.deleteHead = function() {
    const {stack_in, stack_out} = this
    if (stack_out.length) {
        // ä»å¤´å‡º
        return stack_out.shift()
    } else {
        while (stack_in.length) {
            stack_out.push(stack_in.shift())
        }
        if (!stack_out.length) {
            return -1
        }
        return stack_out.shift()
    }
};
```

4. [å­—ç¬¦ä¸²è§£ç ](https://leetcode-cn.com/problems/decode-string/submissions/)

```js
var decodeString = function(s) {
    // ç±»ä¼¼äºæ•°å­¦ä¸­çš„()ï¼Œå¤–å±‚çš„è®¡ç®—éœ€è¦ç­‰å¾…å†…å±‚çš„ç»“æœã€‚ä¾‹å¦‚2(1 + 2)ï¼Œå…ˆç®—1+2=3ï¼Œå†ç®—å¤–å±‚çš„ã€‚
    // å¤§è‡´çš„æ€è·¯æ˜¯ï¼šå½“é‡åˆ°[å­—ç¬¦æ—¶ã€‚æ­¤æ—¶è¦å…ˆè®¡ç®—å†…å±‚ã€‚ç”¨æ ˆæŠŠå¤–å±‚çš„å­—ç¬¦å­˜èµ·æ¥ï¼Œå†…å±‚è®¡ç®—åã€‚æ ˆé¡¶çš„å­—ç¬¦å°±æ˜¯æœ€å¤–å±‚çš„å­—ç¬¦ã€‚åœ¨è¿›è¡Œæ‹¼æ¥
    // éå†å­—ç¬¦ä¸²ï¼šå½“é‡åˆ°æ•°å­—å­—ç¬¦ï¼Œè½¬æ¢æˆæ•°å­—ã€‚
    //             å½“é‡åˆ°æ™®é€šå­—ç¬¦ï¼Œpushåˆ°resä¸­
    //             å½“é‡åˆ°'[' ä»£è¡¨è¦å¼€å§‹è®¡ç®—å†…å±‚ï¼Œå°†å€æ•°å’Œresåˆ†åˆ«æ¨å…¥ä¸¤ä¸ªæ ˆï¼Œç­‰å¾…è®¡ç®—
    //              å½“é‡åˆ°']'ï¼Œæ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œå‚ä¸è®¡ç®—

    let num_stack = []
    let str_stack = []
    let res = ''
    let num = 0
    for (let i=0;i < s.length;i++) {
        if (!isNaN(s[i])) {
            num = num * 10 + parseInt(s[i])
        } else if (s[i] === '[') {
            // å¤–å±‚æ•°å­—å’Œreså…¥æ ˆ
            num_stack.push(num)
            str_stack.push(res)
            // reså…¥æ ˆåéœ€è¦ç½®ç©º
            res = ''
            num = 0
        } else if(s[i] === ']') {
            // å‡ºæ ˆè®¡ç®—
            let repeat_times = num_stack.pop()
            res = str_stack.pop() + res.repeat(repeat_times)
        } else {
            res += s[i]
        }
    }
    return res
};
```

### æ»‘åŠ¨çª—å£

1. [æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/submissions/)

```js
var lengthOfLongestSubstring = function (s) {
  let res = []
  let max = 0
  for (let i = 0; i < s.length; i++) {
    let index = res.indexOf(s[i])
    // å¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™æ»‘åŠ¨çª—å£ï¼Œåˆ é™¤è¿™ä¸ªå­—ç¬¦æœ¬èº«ä»¥åŠè¿™ä¸ªå­—ç¬¦ä¹‹å‰çš„å­—ç¬¦
    if (index !== -1) res.splice(0, index + 1)
    res.push(s.charAt(i))
    max = Math.max(res.length, max)
  }
  return max
}
```

2. [æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/solution/wu-li-jie-fa-by-stg-2/)
2. [é•¿åº¦æœ€å°çš„å­æ•°ç»„](https://leetcode-cn.com/problems/minimum-size-subarray-sum/)

```js
// æ‰©å±•çª—å£ï¼šj++ï¼Œå¯»æ‰¾å¯è¡Œè§£ã€‚å½“æ‰¾åˆ°å°±ä¸å†æ‰©å±•
// ç¼©å°ä¸²å£ï¼ši++ï¼Œä¼˜åŒ–è§£ã€‚å½“ä¸æ»¡è¶³æ—¶ç»“æŸ
var minSubArrayLen = function (target, nums) {
      let res = []
      let i = j = sum = 0
      let minLen = Number.MAX_VALUE
      while (j++ < nums.length) {
        sum += nums[j]
        while (sum >= target) {
          minLen = Math.min(minLen, j - i + 1)
          sum -= nums[i++]
        }
      }
      return minLen === Number.MAX_VALUE ? 0 : minLen
    };
```

## react é—®é¢˜

### react ç”Ÿå‘½å‘¨æœŸ 15.x 16.x

![16ç”Ÿå‘½å‘¨æœŸ](C:\Users\å§œå˜¿å˜¿\Desktop\imgs\react 16ç”Ÿå‘½å‘¨æœŸ.png)

ä»é¦–å±æ¸²æŸ“å’Œè§¦å‘æ›´æ–°ä¸¤ä¸ªé˜¶æ®µè®²è§£ï¼š

**é¦–å±æ¸²æŸ“**

- è°ƒç”¨`ReactDOM.render()`

- è¿›å…¥`render`é˜¶æ®µ

- åœ¨`render`é˜¶æ®µï¼Œé€šè¿‡`dfs`çš„æ–¹å¼åˆ›å»º fiber æ ‘(workInProgress æ ‘)ï¼Œåˆ›å»ºè¿‡ç¨‹ï¼š

  - åˆ›å»ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹`App`ï¼Œç„¶åä¼šè°ƒç”¨`App`çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°`constructor`ã€`getDerivedStateFromProps/componentWillMount`ã€`render`
  - ä¹‹åæŸ¥æ‰¾`App`æœ‰æ— å­èŠ‚ç‚¹
    - å¦‚æœæœ‰ï¼Œåˆ›å»ºï¼Œå¹¶æ‰§è¡Œä¸Šè¿°ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œ(ä¸€ç›´ä¼šæ·±åº¦ä¼˜å…ˆéå†å‘ä¸‹)
    - å¦‚æœæ²¡æœ‰ï¼ŒæŸ¥æ‰¾æœ‰æ— å…„å¼ŸèŠ‚ç‚¹
  - å…¨éƒ¨éå†åï¼Œå°±å®Œæˆäº†`renderé˜¶æ®µ`

- è¿›å…¥`commit`é˜¶æ®µ
  - é¦–å…ˆå°†æ•´æ£µ fiber æ ‘å¯¹åº”çš„ dom æ¸²æŸ“åˆ°è§†å›¾ä¸­
  - æ‰§è¡Œå­èŠ‚ç‚¹(æœ€æ·±çš„å­èŠ‚ç‚¹)çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°`componentDidMount`
  - æ‰§è¡Œå…„å¼ŸèŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°
  - æ‰§è¡Œçˆ¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°

**æ›´æ–°é˜¶æ®µ**

- è°ƒç”¨`this.setState`ï¼Œæ›´æ–°äº†`state`

- è¿›å…¥`render`é˜¶æ®µ å¯ä»¥æ‹“å±•`render`é˜¶æ®µå…·ä½“åšäº†å•¥

  - æ·±åº¦ä¼˜å…ˆéå†åˆ›å»º`fiber`æ ‘
    - åˆ›å»ºçš„è¿‡ç¨‹ä¼šä½¿ç”¨`diff`ç®—æ³•ï¼Œæ‰¾å‡ºå‘ç”Ÿå˜åŒ–çš„`fiber`èŠ‚ç‚¹ï¼Œå¹¶æ ‡è®°ã€‚
    - è°ƒç”¨å‘ç”Ÿå˜åŒ–çš„`fiber`èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œ`getDerivedStateFromProps`ã€`render`

- è¿›å…¥`commit`é˜¶æ®µ å¯ä»¥æ‹“å±•`commit`é˜¶æ®µå…·ä½“åšäº†å•¥
  - æ‰§è¡Œå‘ç”Ÿå˜åŒ–çš„èŠ‚ç‚¹å¯¹åº”çš„è§†å›¾æ“ä½œ
  - æ‰§è¡Œå‘ç”Ÿå˜åŒ–çš„èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œ`getSnapshotBeforeUpdate`ã€`componentDidUpdate`

**15.x**

åœ¨`render`å‡½æ•°æ‰§è¡Œä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ğŸ‘‡

1. componentWillMount
2. componentWillReceivePropsã€‚ä»…åœ¨çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶è§¦å‘ï¼Œåœ¨å†…éƒ¨è°ƒç”¨`setState`ä¸ä¼šè§¦å‘ã€‚
3. componentWillUpdate
4. shouldComponentUpdate

åœ¨16.xå¼•å…¥`fiber`åï¼Œåœ¨`renderé˜¶æ®µ`é«˜ä¼˜å…ˆçº§çš„æ›´æ–°å¯ä»¥æ‰“æ–­ä½ä¼˜å…ˆçº§çš„æ›´æ–°ã€‚æ‰€ä»¥ä¼šå¯¼è‡´è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯èƒ½æ‰§è¡Œå¤šæ¬¡ã€‚å¦‚æœåœ¨è¿™äº›å‡½æ•°é‡Œå‘é€`ajax`è¯·æ±‚ï¼Œå¯èƒ½ä¼šå¤šæ¬¡è¯·æ±‚ã€‚

æ‰€ä»¥16.xåˆ é™¤äº†`componentWillMount`ã€`componentWillReceiveProps`ã€`componentWillUpdate`ï¼Œä½¿ç”¨`getDerivedStateFromProps`ä»£æ›¿ã€‚

**shouldComponentUpdate**

ä½¿ç”¨`shouldComponentUpdate`å¯ä»¥é¿å…ä¸€äº›é‡æ¸²æŸ“ã€‚

æ²¡æœ‰ä½¿ç”¨`shouldComponentUpdate`æ—¶ï¼š

1. çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“å¯¼è‡´é‡ä¼ `props`ï¼Œå­ç»„ä»¶ä¹Ÿå°†é‡æ–°æ¸²æŸ“ï¼Œæ— è®º`props`æ˜¯å¦æœ‰å˜åŒ–ã€‚
2. ç»„ä»¶è‡ªèº«è°ƒç”¨`setState`ï¼Œä½†æ˜¯`state`å®é™…æ²¡æœ‰å˜åŒ–ï¼Œä¹Ÿä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚

ä½¿ç”¨`shouldComponentUpdate`å¯ä»¥é€šè¿‡æ¯”è¾ƒå‰åçš„`state`ã€`props`æ¥é¿å…ä¸€äº›é‡æ¸²æŸ“ã€‚

```js
shouldComponentUpdate(nextProps, nextState) {
	// æ¯”è¾ƒæ›´æ–°å‰åä¼ å…¥çš„coloræ˜¯å¦å˜åŒ–ï¼Œæœ‰å˜åŒ–å°±return trueï¼Œé‡æ–°æ¸²æŸ“
	if(this.props.color !== nextProps.color) return true
	// æ¯”è¾ƒæ›´æ–°å‰åçš„stateçš„countæ˜¯å¦å˜åŒ–ï¼Œæœ‰å˜åŒ–å°±return trueï¼Œé‡æ–°æ¸²æŸ“
	if(this.state.count !== nextProps.state) return true
	// æ— å˜åŒ– return false
	return false
}
```

`React.PureComponent`çš„åŸç†å°±æ˜¯ä»¥æµ…å¯¹æ¯”`props`å’Œ`state`çš„æ–¹å¼å®ç°äº†`shouldComponentUpdate`ã€‚

> æ³¨æ„ï¼šReact.PureComponent ä¸­çš„ shouldComponentUpdate() ä»…ä½œå¯¹è±¡çš„æµ…å±‚æ¯”è¾ƒã€‚å¦‚æœå¯¹è±¡ä¸­åŒ…å«å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œåˆ™æœ‰å¯èƒ½å› ä¸ºæ— æ³•æ£€æŸ¥æ·±å±‚çš„å·®åˆ«ï¼Œäº§ç”Ÿé”™è¯¯çš„æ¯”å¯¹ç»“æœã€‚ä»…åœ¨ä½ çš„ props å’Œ state è¾ƒä¸ºç®€å•æ—¶ï¼Œæ‰ä½¿ç”¨ React.PureComponentï¼Œæˆ–è€…åœ¨æ·±å±‚æ•°æ®ç»“æ„å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ forceUpdate() æ¥ç¡®ä¿ç»„ä»¶è¢«æ­£ç¡®åœ°æ›´æ–°ã€‚
> æ­¤å¤–ï¼ŒReact.PureComponent ä¸­çš„ shouldComponentUpdate() å°†è·³è¿‡æ‰€æœ‰å­ç»„ä»¶æ ‘çš„ prop æ›´æ–°ã€‚å› æ­¤ï¼Œè¯·ç¡®ä¿æ‰€æœ‰å­ç»„ä»¶ä¹Ÿéƒ½æ˜¯â€œçº¯â€çš„ç»„ä»¶ã€‚

**16.xæ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°**

1. `getDerivedStateFromProps`
2. `getSnapshotBeforeUpdate`

**getDerivedStateFromProps**

```js
static getDerivedStateFromProps() {}
```

getDerivedStateFromProps ä¼šåœ¨è°ƒç”¨ render æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œå¹¶ä¸”åœ¨åˆå§‹æŒ‚è½½åŠåç»­æ›´æ–°æ—¶éƒ½ä¼šè¢«è°ƒç”¨ã€‚å®ƒåº”è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° stateï¼Œå¦‚æœè¿”å› null åˆ™ä¸æ›´æ–°ä»»ä½•å†…å®¹ã€‚

**getSanpshotBeforeUpdate**

```js
getSnapshotBeforeUpdate(prevProps, prevState)
```

getSnapshotBeforeUpdate() è¢«è°ƒç”¨äºrenderä¹‹åï¼Œå¯ä»¥è¯»å–ä½†æ— æ³•ä½¿ç”¨DOMçš„æ—¶å€™ã€‚å®ƒä½¿æ‚¨çš„ç»„ä»¶å¯ä»¥åœ¨å¯èƒ½æ›´æ”¹ä¹‹å‰ä»DOMæ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚æ»šåŠ¨ä½ç½®ï¼‰ã€‚æ­¤ç”Ÿå‘½å‘¨æœŸè¿”å›çš„ä»»ä½•å€¼éƒ½å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™componentDidUpdateï¼ˆï¼‰ã€‚

### react hook äº†è§£å—ï¼Ÿäº†è§£åˆ°ä»€ä¹ˆç¨‹åº¦

### react è®¾è®¡æ€æƒ³

UI = fn(state)

###. this.setState åŒæ­¥å¼‚æ­¥é—®é¢˜

ä¸åŒçš„æ¨¡å¼æœ‰ä¸åŒçš„è¡¨ç°

1. `legacyæ¨¡å¼`ï¼Œ`ReactDOM.render()`

- å‘½ä¸­äº†`batchedUpdate`æ—¶å¼‚æ­¥
- æ²¡å‘½ä¸­åŒæ­¥

```js
class App extend Component {
  state = {
    num: 0
  }
  click = () => {
    console.log('before', this.state.num) // 0
    this.setState({num: this.state.num + 1})
    console.log('after', this.state.num) //0
  }
}
```

```js
class App extend Component {
  state = {
    num: 0
  }
  click = () => {
    setTimeout(() => {
      console.log('before', this.state.num) // 0
      this.setState({num: this.state.num + 1})
      console.log('after', this.state.num) // 1
    })
  }
}
```

2. `Concurrentæ¨¡å¼`ï¼Œ`ReactDOM.createRoot()`ï¼Œéƒ½æ˜¯å¼‚æ­¥çš„

### React æœ‰é‚£äº›ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼

### äº†è§£ react fiber å—

### æ‰¹å¤„ç†

æ¯”å¦‚ä¸€æ¬¡ç‚¹å‡»ï¼Œè°ƒç”¨äº†å¤šæ¬¡`this.setState`ã€‚åªä¼šæ‰§è¡Œä¸€æ¬¡

```jsx
class App extend Component {
  state = {
    num: 0
  }
  click = () => {
    // åªä¼šæ‰§è¡Œä¸€æ¬¡
    this.setState({num: this.state.num + 1})
    this.setState({num: this.state.num + 1})
    this.setState({num: this.state.num + 1})
  }
}
```

### useEffect å’Œ componentDidMount çš„åŒºåˆ«

**useEffect çš„ç¬¬äºŒä¸ªå‚æ•°[]å¦‚ä½•å½±å“ fn çš„æ‰§è¡Œï¼Ÿ**

**fn å’Œ componentDidMount çš„æ‰§è¡Œæ—¶æœº**

- `useEffect`ä¼šåœ¨`commit`é˜¶æ®µå®Œæˆå`å¼‚æ­¥`è°ƒç”¨

- `componentDidMount`ä¼šåœ¨å®Œæˆè§†å›¾æ›´æ–°`mutation`é˜¶æ®µåï¼Œåœ¨`layouté˜¶æ®µ`åŒæ­¥è°ƒç”¨

- `useLayoutEffect`å’Œ`componentDidMount`çš„è°ƒç”¨æ—¶æœºä¸€è‡´

### react å’Œ vue çš„åŒºåˆ«

**æ•°æ®ç»‘å®š**

Vue åœ¨æ•°æ®ç»‘å®šä¸Šï¼Œé‡‡å–äº†åŒå‘ç»‘å®šç­–ç•¥ï¼Œä¾é  Object.defineProperty ï¼ˆVue 3.0 å·²è¿ç§»åˆ° Proxyï¼‰ä»¥åŠç›‘å¬ DOM äº‹ä»¶å®ç°ã€‚æ•°æ®æ”¹å˜ï¼Œä¾èµ–å¯¹æ•°æ®è¿›è¡Œæ‹¦æˆª / ä»£ç†ï¼›è§†å›¾æ”¹å˜ã€‚

React å¹¶æ²¡æœ‰æ•°æ®å’Œè§†å›¾ä¹‹é—´çš„åŒå‘ç»‘å®šï¼Œé€šè¿‡æ‰‹åŠ¨`this.setState`è§¦å‘æ›´æ–°ã€‚ä¼šä»æ ¹èŠ‚ç‚¹å‘ä¸‹éå†ï¼Œç”Ÿæˆ fiber æ ‘ï¼Œå¯¹æ ‘ä¸­è¦æ›´æ–°çš„èŠ‚ç‚¹è¿›è¡Œæ¸²æŸ“(commit é˜¶æ®µ)ã€‚

### å¯¹hookçš„ç†è§£ hookçš„ä¼˜ç‚¹ ç¼ºç‚¹ï¼Ÿ

hookè®©æˆ‘ä»¬åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§

**hookä¼˜ç‚¹**

1. ä½¿ç”¨è‡ªå®šä¹‰hookï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘
2. Hook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ã€‚ä»¶å¸¸å¸¸åœ¨ componentDidMount å’Œ componentDidUpdate ä¸­è·å–æ•°æ®ã€‚ä½†æ˜¯ï¼ŒåŒä¸€ä¸ª componentDidMount ä¸­å¯èƒ½ä¹ŸåŒ…å«å¾ˆå¤šå…¶å®ƒçš„é€»è¾‘ï¼Œå¦‚è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œè€Œä¹‹åéœ€åœ¨ componentWillUnmount ä¸­æ¸…é™¤ã€‚ã€

**hookç¼ºç‚¹**

1. é—­åŒ…é™·é˜±ã€‚å‡½æ•°ç»„ä»¶æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œæ¯æ¬¡è¿è¡Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚é—­åŒ…é™·é˜±æŒ‡çš„æ˜¯å˜é‡çš„å¼•ç”¨æœ‰å¯èƒ½æ˜¯ä¹‹å‰çš„å€¼ï¼ˆæ—§çš„å€¼ï¼‰

### reactè™šæ‹Ÿdom

**ä»€ä¹ˆæ˜¯è™šæ‹Ÿdom**

ç²—ç•¥çš„ç†è§£ä¸ºä¸€ä¸ªç”¨æ¥è¡¨ç¤ºçœŸå®DOMæ ‘çš„JSå¯¹è±¡ã€‚åœ¨reactä¸­ï¼Œè™šæ‹Ÿdomçš„æ•°æ®ç»“æ„è¢«ç§°ä¸º`fiber`

**è™šæ‹Ÿdomçš„ä¼˜åŠ£**

ä¼˜ç‚¹ï¼š

1. æå‡å¼€å‘æ•ˆç‡ã€‚ä½¿ç”¨Reactï¼Œä½ åªéœ€è¦å‘Šè¯‰Reactä½ æƒ³è®©è§†å›¾å¤„äºä»€ä¹ˆçŠ¶æ€ï¼ŒReactåˆ™é€šè¿‡VitrualDomç¡®ä¿DOMä¸è¯¥çŠ¶æ€ç›¸åŒ¹é…ã€‚ä½ ä¸å¿…è‡ªå·±å»å®Œæˆå±æ€§æ“ä½œã€äº‹ä»¶å¤„ç†ã€DOMæ›´æ–°ï¼ŒReactä¼šæ›¿ä½ å®Œæˆè¿™ä¸€åˆ‡ã€‚



### å¦‚ä½•é€‰æ‹© react æˆ– vue
